// models/announcement.ts remains unchanged as not present in Go
// models/dispute.ts remains unchanged as not present in Go
// models/promotion.ts remains empty as in Go (not defined)
// models/return_request.ts remains unchanged as not present in Go
// models/settings.ts remains unchanged as not present in Go
// models/admins.ts remains unchanged as not present in Go (admin-related)

// Add new: bank_details.ts (matching Go MerchantBankDetails)
import { pgTable, varchar, text, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { merchants } from './merchant';

export const merchantBankDetails = pgTable('merchant_bank_details', {
id: varchar('id').primaryKey(), // Assuming auto-increment or uuid, but Go uses gorm.Model (uint ID)
merchantId: varchar('merchant_id', { length: 36 }).notNull().unique(), // uuid string
bankName: text('bank_name'),
bankCode: varchar('bank_code', { length: 5 }),
accountNumber: varchar('account_number', { length: 15 }),
accountName: text('account_name'),
recipientCode: varchar('recipient_code', { length: 50 }),
currency: varchar('currency', { length: 3 }).default('NGN'),
status: text('status').default('pending'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const merchantBankDetailsRelations = relations(merchantBankDetails, ({ one }) => ({
merchant: one(merchants, {
fields: [merchantBankDetails.merchantId],
references: [merchants.merchantId],
}),
}));

// Update: cart.ts (matching Go Cart)
import { pgTable, varchar, timestamp, uuid } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { users } from './users';
import { cartItems } from './cart_item';

export const carts = pgTable('carts', {
id: uuid('id').defaultRandom().primaryKey(), // Go uses gorm.Model (uint), but align to uuid for consistency
userId: uuid('user_id').notNull(),
status: varchar('status', { length: 20 }).notNull().default('Active'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const cartRelations = relations(carts, ({ many, one }) => ({
cartItems: many(cartItems),
user: one(users, {
fields: [carts.userId],
references: [users.id],
}),
}));

// Update: cart_item.ts (matching Go CartItem)
import { pgTable, uuid, integer, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { carts } from './cart';
import { products } from './products';
import { merchants } from './merchant';
import { variants } from './variant';

export const cartItems = pgTable('cart_items', {
id: uuid('id').defaultRandom().primaryKey(),
cartId: uuid('cart_id').notNull(),
variantId: uuid('variant_id'),
productId: uuid('product_id').notNull(),
quantity: integer('quantity').notNull(),
merchantId: uuid('merchant_id').notNull(),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const cartItemRelations = relations(cartItems, ({ one }) => ({
cart: one(carts, {
fields: [cartItems.cartId],
references: [carts.id],
}),
product: one(products, {
fields: [cartItems.productId],
references: [products.id],
}),
merchant: one(merchants, {
fields: [cartItems.merchantId],
references: [merchants.id],
}),
variant: one(variants, {
fields: [cartItems.variantId],
references: [variants.id],
}),
}));

// Update: category.ts (matching Go Category)
import { pgTable, text, timestamp, integer } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';

export const categories = pgTable('categories', {
id: integer('id').primaryKey(), // Go uses gorm.Model (uint ID)
name: text('name').notNull(),
parentId: integer('parent_id'),
attributes: jsonb('attributes'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const categoryRelations = relations(categories, ({ one }) => ({
parent: one(categories, {
fields: [categories.parentId],
references: [categories.id],
}),
}));

// Update: inventory.ts (matching Go Inventory)
import { pgTable, uuid, integer, timestamp, boolean } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { products } from './products';
import { variants } from './variant';
import { merchants } from './merchant';

export const inventories = pgTable('inventories', {
id: uuid('id').defaultRandom().primaryKey(),
productId: uuid('product_id'),
variantId: uuid('variant_id'),
merchantId: uuid('merchant_id').notNull(),
quantity: integer('quantity').notNull().default(0),
reservedQuantity: integer('reserved_quantity').notNull().default(0),
lowStockThreshold: integer('low_stock_threshold').default(5),
backorderAllowed: boolean('backorder_allowed').default(false),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const inventoryRelations = relations(inventories, ({ one }) => ({
product: one(products, {
fields: [inventories.productId],
references: [products.id],
}),
variant: one(variants, {
fields: [inventories.variantId],
references: [variants.id],
}),
merchant: one(merchants, {
fields: [inventories.merchantId],
references: [merchants.id],
}),
}));

// Update: merchant.ts and merchant_applications.ts (matching Go MerchantApplication and Merchant)
import { pgTable, uuid, varchar, text, timestamp, decimal, jsonb } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';

export const merchantApplications = pgTable('merchant_application', {
id: uuid('id').defaultRandom().primaryKey(),
storeName: varchar('store_name', { length: 255 }).notNull(),
name: varchar('name', { length: 255 }).notNull(),
personalEmail: varchar('personal_email', { length: 255 }).notNull().unique(),
workEmail: varchar('work_email', { length: 255 }).notNull().unique(),
phoneNumber: varchar('phone_number', { length: 50 }),
personalAddress: jsonb('personal_address').notNull(),
workAddress: jsonb('work_address').notNull(),
businessType: varchar('business_type', { length: 100 }),
website: varchar('website', { length: 255 }),
businessDescription: text('business_description'),
businessRegistrationNumber: varchar('business_registration_number', { length: 255 }).notNull().unique(),
storeLogoUrl: varchar('store_logo_url', { length: 255 }),
businessRegistrationCertificate: varchar('business_registration_certificate', { length: 255 }),
status: varchar('status', { length: 20 }).default('pending').notNull(),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const merchants = pgTable('merchant', {
id: uuid('id').defaultRandom().primaryKey(),
applicationId: uuid('application_id').notNull().unique(),
merchantId: uuid('merchant_id').notNull().unique(),
storeName: varchar('store_name', { length: 255 }).notNull(),
name: varchar('name', { length: 255 }).notNull(),
personalEmail: varchar('personal_email', { length: 255 }).notNull().unique(),
workEmail: varchar('work_email', { length: 255 }).notNull().unique(),
phoneNumber: varchar('phone_number', { length: 50 }),
personalAddress: jsonb('personal_address').notNull(),
workAddress: jsonb('work_address').notNull(),
businessType: varchar('business_type', { length: 100 }),
website: varchar('website', { length: 255 }),
businessDescription: text('business_description'),
businessRegistrationNumber: varchar('business_registration_number', { length: 255 }).notNull().unique(),
storeLogoUrl: varchar('store_logo_url', { length: 255 }),
businessRegistrationCertificate: varchar('business_registration_certificate', { length: 255 }),
password: varchar('password', { length: 255 }).notNull(),
status: varchar('status', { length: 20 }).default('active').notNull(),
commissionTier: varchar('commission_tier').default('standard'),
commissionRate: decimal('commission_rate', { precision: 10, scale: 2 }).default('5.00'),
accountBalance: decimal('account_balance', { precision: 15, scale: 2 }).default('0.00'),
totalSales: decimal('total_sales', { precision: 15, scale: 2 }).default('0.00'),
totalPayouts: decimal('total_payouts', { precision: 15, scale: 2 }).default('0.00'),
stripeAccountId: text('stripe_account_id'),
payoutSchedule: varchar('payout_schedule').default('weekly'),
lastPayoutDate: timestamp('last_payout_date'),
banner: varchar('banner', { length: 255 }),
policies: jsonb('policies'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const merchantRelations = relations(merchants, ({ one }) => ({
application: one(merchantApplications, {
fields: [merchants.applicationId],
references: [merchantApplications.id],
}),
}));

// Update: order.ts (matching Go Order)
import { pgTable, uuid, decimal, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { users } from './users';
import { orderItems } from './order_item';
import { payments } from './payment';

export const orders = pgTable('orders', {
id: uuid('id').defaultRandom().primaryKey(),
userId: uuid('user_id').notNull(),
subTotal: decimal('sub_total', { precision: 10, scale: 2 }),
totalAmount: decimal('total_amount', { precision: 10, scale: 2 }).notNull(),
status: varchar('status', { length: 20 }).notNull().default('Pending'),
shippingMethod: varchar('shipping_method', { length: 50 }),
couponCode: varchar('coupon_code', { length: 50 }),
currency: varchar('currency', { length: 3 }).default('NGN'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const orderRelations = relations(orders, ({ many, one }) => ({
orderItems: many(orderItems),
payments: many(payments),
user: one(users, {
fields: [orders.userId],
references: [users.id],
}),
}));

// Update: order_item.ts (matching Go OrderItem)
import { pgTable, uuid, integer, decimal, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { orders } from './order';
import { products } from './products';
import { merchants } from './merchant';

export const orderItems = pgTable('order_items', {
id: uuid('id').defaultRandom().primaryKey(),
orderId: uuid('order_id').notNull(),
productId: uuid('product_id').notNull(),
merchantId: uuid('merchant_id').notNull(),
quantity: integer('quantity').notNull(),
price: decimal('price', { precision: 10, scale: 2 }).notNull(),
fulfillmentStatus: varchar('fulfillment_status', { length: 20 }).notNull().default('New'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const orderItemRelations = relations(orderItems, ({ one }) => ({
order: one(orders, {
fields: [orderItems.orderId],
references: [orders.id],
}),
product: one(products, {
fields: [orderItems.productId],
references: [products.id],
}),
merchant: one(merchants, {
fields: [orderItems.merchantId],
references: [merchants.id],
}),
}));

// Add new: order_merchant_split.ts (matching Go OrderMerchantSplit)
import { pgTable, uuid, decimal, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { orders } from './order';
import { merchants } from './merchant';

export const orderMerchantSplits = pgTable('order_merchant_splits', {
id: uuid('id').defaultRandom().primaryKey(),
orderId: uuid('order_id').notNull(),
merchantId: uuid('merchant_id').notNull(),
amountDue: decimal('amount_due', { precision: 10, scale: 2 }),
fee: decimal('fee', { precision: 10, scale: 2 }),
status: varchar('status').default('pending'),
holdUntil: timestamp('hold_until'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const orderMerchantSplitRelations = relations(orderMerchantSplits, ({ one }) => ({
order: one(orders, {
fields: [orderMerchantSplits.orderId],
references: [orders.id],
}),
merchant: one(merchants, {
fields: [orderMerchantSplits.merchantId],
references: [merchants.id],
}),
}));

// Update: payment.ts (matching Go Payment)
import { pgTable, uuid, decimal, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { orders } from './order';

export const payments = pgTable('payments', {
id: uuid('id').defaultRandom().primaryKey(),
orderId: uuid('order_id').notNull(),
amount: decimal('amount', { precision: 10, scale: 2 }).notNull(),
currency: varchar('currency', { length: 3 }).default('NGN'),
status: varchar('status', { length: 20 }).notNull().default('Pending'),
transactionId: varchar('transaction_id', { length: 100 }).unique(),
authorizationUrl: varchar('authorization_url', { length: 500 }),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const paymentRelations = relations(payments, ({ one }) => ({
order: one(orders, {
fields: [payments.orderId],
references: [orders.id],
}),
}));

// Update: payout.ts (matching Go Payout)
import { pgTable, uuid, decimal, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { merchants } from './merchant';

export const payouts = pgTable('payouts', {
id: uuid('id').defaultRandom().primaryKey(),
merchantId: uuid('merchant_id').notNull(),
amount: decimal('amount', { precision: 10, scale: 2 }).notNull(),
status: varchar('status', { length: 20 }).notNull().default('Pending'),
payoutAccountId: varchar('payout_account_id', { length: 255 }).notNull(),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const payoutRelations = relations(payouts, ({ one }) => ({
merchant: one(merchants, {
fields: [payouts.merchantId],
references: [merchants.id],
}),
}));

// Update: products.ts (matching Go Product from product2.go)
import { pgTable, uuid, varchar, text, decimal, timestamp, integer, boolean } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { merchants } from './merchant';
import { categories } from './category';
import { variants } from './variant';
import { medias } from './media';
import { inventories } from './inventory';

export const products = pgTable('products', {
id: uuid('id').defaultRandom().primaryKey(),
merchantId: uuid('merchant_id').notNull(),
name: varchar('name', { length: 255 }).notNull(),
description: text('description'),
sku: varchar('sku', { length: 100 }).unique().notNull(),
basePrice: decimal('base_price', { precision: 10, scale: 2 }).notNull(),
categoryId: integer('category_id'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
deletedAt: timestamp('deleted_at'),
});

export const productRelations = relations(products, ({ one, many }) => ({
merchant: one(merchants, {
fields: [products.merchantId],
references: [merchants.id],
}),
category: one(categories, {
fields: [products.categoryId],
references: [categories.id],
}),
variants: many(variants),
medias: many(medias),
simpleInventory: one(inventories, {
fields: [products.id],
references: [inventories.productId],
}),
}));

// Update: variant.ts (matching Go Variant)
import { pgTable, uuid, jsonb, decimal, varchar, timestamp, boolean } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { products } from './products';
import { inventories } from './inventory';

export const variants = pgTable('variants', {
id: uuid('id').defaultRandom().primaryKey(),
productId: uuid('product_id').notNull(),
sku: varchar('sku', { length: 100 }).unique().notNull(),
priceAdjustment: decimal('price_adjustment', { precision: 10, scale: 2 }).notNull().default('0.00'),
totalPrice: decimal('total_price', { precision: 10, scale: 2 }).notNull(),
attributes: jsonb('attributes').default({}),
isActive: boolean('is_active').default(true),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
deletedAt: timestamp('deleted_at'),
});

export const variantRelations = relations(variants, ({ one }) => ({
product: one(products, {
fields: [variants.productId],
references: [products.id],
}),
inventory: one(inventories, {
fields: [variants.id],
references: [inventories.variantId],
}),
}));

// Update: media.ts (matching Go Media)
import { pgTable, uuid, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { products } from './products';

export const medias = pgTable('medias', {
id: uuid('id').defaultRandom().primaryKey(),
productId: uuid('product_id').notNull(),
url: varchar('url').notNull(),
type: varchar('type').notNull().default('image'), // enum-like: image, video
publicId: varchar('public_id'),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const mediaRelations = relations(medias, ({ one }) => ({
product: one(products, {
fields: [medias.productId],
references: [products.id],
}),
}));

// Update: users.ts (matching Go User)
import { pgTable, uuid, varchar, timestamp } from 'drizzle-orm/pg-core';
import { relations } from 'drizzle-orm';
import { carts } from './cart';
import { orders } from './order';

export const users = pgTable('users', {
id: uuid('id').defaultRandom().primaryKey(),
email: varchar('email').unique().notNull(),
name: varchar('name', { length: 100 }).notNull(),
password: varchar('password'),
googleId: varchar('google_id'),
country: varchar('country', { length: 100 }),
createdAt: timestamp('created_at').defaultNow(),
updatedAt: timestamp('updated_at').defaultNow(),
});

export const userRelations = relations(users, ({ many }) => ({
carts: many(carts),
orders: many(orders),
}));
